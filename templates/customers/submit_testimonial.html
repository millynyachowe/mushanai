{% extends 'base.html' %}

{% block title %}Write a Testimonial - Mushanai{% endblock %}

{% block content %}
<div class="container" style="max-width: 800px; margin: 2rem auto; padding: 0 1rem;">
    <h1 style="font-size: 2.5rem; color: #000000; margin-bottom: 2rem;">Write a Testimonial</h1>
    
    <div style="background-color: #f8f8f8; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
        <h2 style="font-size: 1.3rem; color: #000000; margin-bottom: 0.5rem;">Vendor: {{ vendor.username }}</h2>
        {% if vendor.vendor_profile.company_name %}
            <p style="color: #666; font-size: 1.1rem;">{{ vendor.vendor_profile.company_name }}</p>
        {% endif %}
    </div>
    
    {% if existing_testimonial %}
    <div style="background-color: #fff3cd; padding: 1rem; border-radius: 8px; margin-bottom: 2rem; border-left: 4px solid #ffc107;">
        <p style="color: #856404; margin: 0;">You have already submitted a testimonial for this vendor. Updating it will require admin approval again.</p>
    </div>
    {% endif %}
    
    <form method="post" style="background-color: #ffffff; padding: 2rem; border-radius: 8px; border: 1px solid #e0e0e0;">
        {% csrf_token %}
        
        <div style="margin-bottom: 1.5rem;">
            <label for="title" style="display: block; margin-bottom: 0.5rem; color: #000000; font-weight: bold;">Title (Optional)</label>
            <input type="text" id="title" name="title" 
                   value="{% if existing_testimonial %}{{ existing_testimonial.title }}{% endif %}"
                   placeholder="e.g., Great service and quality products!"
                   style="width: 100%; padding: 0.75rem; border: 2px solid #e0e0e0; border-radius: 4px; font-size: 1rem;">
        </div>
        
        <div style="margin-bottom: 1.5rem;">
            <label for="rating" style="display: block; margin-bottom: 0.5rem; color: #000000; font-weight: bold;">Rating</label>
            <select id="rating" name="rating" 
                    style="width: 100%; padding: 0.75rem; border: 2px solid #e0e0e0; border-radius: 4px; font-size: 1rem;">
                <option value="5" {% if existing_testimonial and existing_testimonial.rating == 5 %}selected{% endif %}>5 Stars - Excellent</option>
                <option value="4" {% if existing_testimonial and existing_testimonial.rating == 4 %}selected{% endif %}>4 Stars - Very Good</option>
                <option value="3" {% if existing_testimonial and existing_testimonial.rating == 3 %}selected{% endif %}>3 Stars - Good</option>
                <option value="2" {% if existing_testimonial and existing_testimonial.rating == 2 %}selected{% endif %}>2 Stars - Fair</option>
                <option value="1" {% if existing_testimonial and existing_testimonial.rating == 1 %}selected{% endif %}>1 Star - Poor</option>
            </select>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
            <label for="testimonial" style="display: block; margin-bottom: 0.5rem; color: #000000; font-weight: bold;">Your Testimonial *</label>
            <textarea id="testimonial" name="testimonial" rows="6" required
                      placeholder="Share your experience with this vendor..."
                      style="width: 100%; padding: 0.75rem; border: 2px solid #e0e0e0; border-radius: 4px; font-size: 1rem; font-family: inherit;">{% if existing_testimonial %}{{ existing_testimonial.testimonial }}{% endif %}</textarea>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
            <label for="display_name" style="display: block; margin-bottom: 0.5rem; color: #000000; font-weight: bold;">Display Name (Optional)</label>
            <input type="text" id="display_name" name="display_name" 
                   value="{% if existing_testimonial %}{{ existing_testimonial.display_name }}{% endif %}"
                   placeholder="Leave blank to use your username"
                   style="width: 100%; padding: 0.75rem; border: 2px solid #e0e0e0; border-radius: 4px; font-size: 1rem;">
            <p style="color: #666; font-size: 0.9rem; margin-top: 0.5rem;">If provided, this name will be displayed instead of your username.</p>
        </div>
        
        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button type="submit" class="btn btn-primary" style="padding: 0.75rem 2rem; font-size: 1rem;">
                {% if existing_testimonial %}Update Testimonial{% else %}Submit Testimonial{% endif %}
            </button>
            <a href="{% url 'vendor_profile_public' vendor.id %}" class="btn" style="padding: 0.75rem 2rem; font-size: 1rem; background-color: #e0e0e0; color: #000000; text-decoration: none; border-radius: 4px;">
                Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}

