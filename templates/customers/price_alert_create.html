{% extends 'base.html' %}

{% block title %}Create Price Alert - Mushanai{% endblock %}

{% block content %}
<div class="container" style="max-width: 800px; margin: 2rem auto; padding: 0 1rem;">
    <h1 style="font-size: 2.5rem; color: #000000; margin-bottom: 2rem;">Create Price Alert</h1>
    
    <div style="background-color: #f8f8f8; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
        <h2 style="font-size: 1.3rem; color: #000000; margin-bottom: 0.5rem;">
            <a href="{% url 'product_detail' product.slug %}" style="color: #be8400; text-decoration: none;">{{ product.name }}</a>
        </h2>
        <div style="display: flex; gap: 2rem; margin-top: 1rem;">
            <div>
                <span style="color: #666;">Current Price:</span>
                <span style="font-weight: bold; color: #be8400; font-size: 1.2rem; margin-left: 0.5rem;">${{ product.price|floatformat:2 }}</span>
            </div>
        </div>
    </div>
    
    {% if existing_alert %}
    <div style="background-color: #fff3cd; padding: 1rem; border-radius: 8px; margin-bottom: 2rem; border-left: 4px solid #ffc107;">
        <p style="color: #856404; margin: 0;">You already have an active price alert for this product.</p>
        <a href="{% url 'price_alerts_list' %}" style="color: #be8400; text-decoration: none; margin-top: 0.5rem; display: inline-block;">View your alerts â†’</a>
    </div>
    {% else %}
    <form method="post" style="background-color: #ffffff; padding: 2rem; border-radius: 8px; border: 1px solid #e0e0e0;">
        {% csrf_token %}
        
        <div style="margin-bottom: 1.5rem;">
            <label for="target_price" style="display: block; margin-bottom: 0.5rem; color: #000000; font-weight: bold;">Target Price (Optional)</label>
            <input type="number" id="target_price" name="target_price" step="0.01" min="0"
                   placeholder="e.g., 50.00"
                   style="width: 100%; padding: 0.75rem; border: 2px solid #e0e0e0; border-radius: 4px; font-size: 1rem;">
            <p style="color: #666; font-size: 0.9rem; margin-top: 0.5rem;">Alert me when the price drops to or below this amount.</p>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; color: #000000; font-weight: bold;">OR</label>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
            <label for="target_percentage" style="display: block; margin-bottom: 0.5rem; color: #000000; font-weight: bold;">Target Percentage Drop (Optional)</label>
            <input type="number" id="target_percentage" name="target_percentage" step="0.01" min="0" max="100"
                   placeholder="e.g., 20"
                   style="width: 100%; padding: 0.75rem; border: 2px solid #e0e0e0; border-radius: 4px; font-size: 1rem;">
            <p style="color: #666; font-size: 0.9rem; margin-top: 0.5rem;">Alert me when the price drops by this percentage (e.g., 20 for 20% off).</p>
        </div>
        
        <div style="background-color: #e3f2fd; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem;">
            <p style="color: #1976d2; margin: 0; font-size: 0.9rem;">ðŸ’¡ <strong>Tip:</strong> You can set either a target price or a percentage drop. You'll be notified via email when the condition is met.</p>
        </div>
        
        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button type="submit" class="btn btn-primary" style="padding: 0.75rem 2rem; font-size: 1rem;">
                Create Alert
            </button>
            <a href="{% url 'product_detail' product.slug %}" class="btn" style="padding: 0.75rem 2rem; font-size: 1rem; background-color: #e0e0e0; color: #000000; text-decoration: none; border-radius: 4px;">
                Cancel
            </a>
        </div>
    </form>
    {% endif %}
</div>
{% endblock %}

